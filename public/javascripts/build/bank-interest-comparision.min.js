/*! bank-interest-comparision 2017-04-09 04:04 */

var angularApp=angular.module("bankRateComparer",["ui.router","ui.bootstrap"]);angularApp.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/dashboard"),a.state("dashboard",{url:"/dashboard",templateUrl:"partials/dashboard.html"}).state("results",{url:"/results",templateUrl:"partials/results.html"})}]),angularApp.controller("DashBoardController",["$scope","$uibModal","$log","$document","$state","detailsServices",function(a,b,c,d,e,f){var g=this;g.animationsEnabled=!0,g.details={},g.open=function(a){g.details.loanType=a;var e=angular.element(d[0].querySelector(".modal-demo"));b.open({animation:g.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"formDetails.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",appendTo:e,resolve:{items:function(){return g.items}}}).result.then(function(a){g.details.age=a.age,g.details.gender=a.gender,f.sendDetails(g.details)},function(){c.info("Modal dismissed at: "+new Date)})},g.toggleAnimation=function(){g.animationsEnabled=!g.animationsEnabled}}]),angularApp.controller("ModalInstanceCtrl",["$uibModalInstance","items","$scope",function(a,b,c){var d=this;c.details={},c.details.gender="",c.details.age="",c.genderInvalid=!1,c.ageInvalid=!1,d.ok=function(){""==c.details.gender||null==c.details.gender?c.genderInvalid=!0:c.genderInvalid=!1,""==c.details.age||null==c.details.age||c.details.age<18||c.details.age>100?c.ageInvalid=!0:c.ageInvalid=!1,c.genderInvalid||c.ageInvalid||(console.log(c.details),a.close(c.details))},d.cancel=function(){a.dismiss("cancel")}}]),angularApp.filter("customCamelize",function(){return function(a){return a.toString().replace(a[0],a[0].toUpperCase())}}),angularApp.filter("customAge",function(){return function(a){return a+" years"}}),angularApp.filter("customPercent",function(){return function(a){return a+" %"}}),angularApp.controller("ResultsController",["$document","$uibModal","$log","$scope","detailsServices",function(a,b,c,d,e){d.resultsDetail=e.getDetails(),console.log(d.resultsDetail),d.animationsEnabled=!0,d.open=function(e){d.interestRate=e;var f=angular.element(a[0].querySelector(".modal-demo"));b.open({animation:d.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"emiCalculator.html",controller:"ModalInstanceCtrl2",controllerAs:"$ctrl",appendTo:f,resolve:{items:function(){return d.interestRate}}}).result.then(function(a){},function(){c.info("Modal dismissed at: "+new Date)})},d.toggleAnimation=function(){d.animationsEnabled=!d.animationsEnabled}}]),angularApp.controller("ModalInstanceCtrl2",["$uibModalInstance","items","$scope",function(a,b,c){var d=this;console.log(b),d.interestRate=b,d.calculate=function(){console.log(b+" "+d.loanAmount+" "+d.tenure),ratePerMonth=d.interestRate/1200,onePRate=Math.pow(1+ratePerMonth,d.tenure),d.emi=d.loanAmount*ratePerMonth*onePRate/(onePRate-1)},d.ok=function(){a.close()},d.cancel=function(){a.dismiss("cancel")}}]),angularApp.factory("detailsServices",["$http","$state",function(a,b){var c={},d={};return c.getDetails=function(){return d},c.sendDetails=function(c){a({method:"POST",url:"/sendDetails.json",data:c}).then(function(a){console.log(a.data),d=a.data,b.go("results")},function(a){return console.log(a),!1})},c}]);